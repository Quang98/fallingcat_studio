<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Playing Game</title>
<style>
body,html{margin:0;padding:0;width:100%;height:100%;background:#000;display:flex;flex-direction:column;}
#topbar{background:#181b21;color:#fff;padding:10px 20px;display:flex;justify-content:space-between;align-items:center;}
#gameFrame{flex:1;width:100%;border:none;}
button{background:#ff6a00;color:#fff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer;}
button:hover{opacity:0.8;}
#loadingBar{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:50%;height:6px;background:#555;border-radius:3px;overflow:hidden;}
#loadingBar div{height:100%;width:0%;background:#ff6a00;}
</style>
</head>
<body>
<div id="topbar">
  <span id="gameTitle">Đang tải...</span>
  <button onclick="toggleFullscreen()">Fullscreen</button>
</div>
<div id="loadingBar"><div></div></div>
<iframe id="gameFrame"></iframe>

<script>
function getQuery(name){const urlParams=new URLSearchParams(window.location.search);return urlParams.get(name);}
const gameId=getQuery('id');
const iframe=document.getElementById('gameFrame');
const title=document.getElementById('gameTitle');
const loading=document.getElementById('loadingBar').firstElementChild;

if(gameId){
  fetch('games.json').then(res=>res.json()).then(list=>{
    const g=list.find(x=>x.id===gameId);
    if(g){
      title.textContent=g.name;
      iframe.src='games/'+g.id+'/index.html';
    //   console.log(iframe.src); 
    //   let progress=0;
    //   const interval=setInterval(()=>{
    //     progress+=Math.random()*5;
    //     if(progress>=100){progress=100;loading.style.width='100%';clearInterval(interval);document.getElementById('loadingBar').style.display='none';}
    //     loading.style.width=progress+'%';
    //   },100);
    } else {title.textContent='Game không tồn tại';}
  });
}else{title.textContent='Game không xác định';}

function toggleFullscreen(){
  if(document.fullscreenElement){document.exitFullscreen();}
  else{document.documentElement.requestFullscreen();}
}
</script>
</body>
</html>
